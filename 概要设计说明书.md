# Markdown编辑器FlowyNote概要设计说明书

## 1. 引言

### 1.1 目的

本概要设计说明书旨在为Markdown编辑器FlowyNote提供一个高层次的设计概述，包括系统架构、主要功能模块、用户界面设计、技术选型等。通过本说明书，开发团队可以快速了解项目的整体设计思路和方向。

### 1.2 目标用户

- **开发团队**：负责项目的开发和实现。
- **测试团队**：负责项目的测试和验证。
- **产品经理**：负责项目的整体规划和需求管理。

### 1.3 项目范围

本项目将开发一个跨平台的Markdown编辑器FlowyNote，使用Qt框架实现，支持Windows、Linux和Mac OS操作系统。编辑器将提供基本的Markdown语法支持，并具备实时预览、自定义界面、插件扩展等功能。

## 2. 系统架构

### 2.1 总体架构

FlowyNote采用分层架构设计，主要分为以下几个层次：

- **用户界面层**：使用Qt框架实现，提供编辑、预览、分栏三种模式，支持自定义缩放、拖动、标题栏、快捷菜单和背景样式。
- **业务逻辑层**：负责处理用户输入、Markdown语法解析、文件管理、插件管理等业务逻辑。
- **数据访问层**：使用SQLite3作为数据库管理系统，存储用户信息、笔记内容、标签、分类等数据。
- **日志层**：使用Log4cpp记录系统日志，方便调试和问题排查。

### 2.2 技术选型

- **开发框架**：Qt
- **Markdown解析引擎**：Google V8 Engine + Markd.js
- **数据库**：SQLite3
- **日志系统**：Log4cpp
- **许可证**：GPL (GNU GENERAL PUBLIC LICENSE)

## 3. 主要功能模块

### 3.1 用户界面模块

- **编辑区**：提供Markdown文本编辑功能，支持语法高亮。
- **预览区**：实时显示Markdown文本的渲染效果。
- **分栏模式**：支持编辑区和预览区分栏显示。
- **自定义界面**：支持自定义缩放、拖动、标题栏、快捷菜单和背景样式。

### 3.2 业务逻辑模块

- **Markdown解析**：使用Google V8 Engine + Markd.js解析Markdown语法。
- **文件管理**：支持新建、打开、保存、另存为Markdown文件。
- **插件管理**：支持第三方插件的安装和使用，扩展编辑器功能。

### 3.3 数据访问模块

- **用户信息管理**：存储和管理用户信息。
- **笔记管理**：存储和管理笔记内容、标签、分类等数据。

### 3.4 日志模块

- **日志记录**：使用Log4cpp记录系统日志，方便调试和问题排查。

## 4. 用户界面设计

### 4.1 主界面

- **编辑区**：左侧为Markdown文本编辑区，支持语法高亮。
- **预览区**：右侧或下方为实时预览区，显示渲染后的HTML效果。
- **工具栏**：顶部工具栏包含常用的编辑功能按钮（如加粗、斜体、标题、列表等）。

### 4.2 菜单栏

- **文件菜单**：包含新建、打开、保存、另存为等功能。
- **编辑菜单**：包含撤销、重做、查找、替换等功能。
- **视图菜单**：包含切换主题、调整字体大小等功能。
- **插件菜单**：包含插件管理、插件设置等功能。

### 4.3 快捷键

- **常用快捷键**：支持常用的快捷键操作，如Ctrl+S（保存）、Ctrl+Z（撤销）等。
- **自定义快捷键**：支持用户自定义快捷键。

## 5. 技术实现

### 5.1 用户界面

- **Qt框架**：使用Qt框架实现跨平台的图形用户界面。
- **自定义控件**：实现自定义缩放、拖动、标题栏、快捷菜单和背景样式。

### 5.2 Markdown解析

- **Google V8 Engine**：使用Google V8 Engine作为JavaScript引擎，动态链接库形式调用。
- **Markd.js**：使用Markd.js解析Markdown语法，效率高。

### 5.3 数据库

- **SQLite3**：使用SQLite3作为数据库管理系统，存储用户信息、笔记内容、标签、分类等数据。

### 5.4 日志系统

- **Log4cpp**：使用Log4cpp记录系统日志，方便调试和问题排查。

## 6. 附录

### 6.1 术语表

- **Markdown**：一种轻量级标记语言，用于格式化文本。
- **实时预览**：在编辑器中实时显示Markdown文本的渲染效果。
- **插件**：扩展编辑器功能的独立模块。

### 6.2 参考资料

- [Qt框架](https://www.qt.io/)
- [Google V8 Engine](https://v8.dev/)
- [Markd.js](https://github.com/markdown-it/markdown-it)
- [SQLite3](https://www.sqlite.org/)
- [Log4cpp](http://log4cpp.sourceforge.net/)
- [GPL许可证](https://www.gnu.org/licenses/gpl-3.0.html)